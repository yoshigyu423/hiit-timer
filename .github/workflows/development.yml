name: HIIT Timer Development

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]
  workflow_dispatch:

permissions:
  contents: read
  pages: write
  id-token: write

jobs:
  validate-project:
    runs-on: ubuntu-latest
    name: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¤œè¨¼
    steps:
    - uses: actions/checkout@v4
    
    - name: ğŸ“ ãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€ ç¢ºèª
      run: |
        echo "=== HIIT Timer ãƒ•ã‚¡ã‚¤ãƒ«ç¢ºèª ==="
        echo "ğŸ“… å®Ÿè¡Œæ—¥æ™‚: $(date)"
        echo ""
        if [ -f "index.html" ]; then
          echo "âœ… index.html å­˜åœ¨ç¢ºèª"
        else
          echo "âŒ index.html ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“"
        fi
        
        if [ -f "style.css" ]; then
          echo "âœ… style.css å­˜åœ¨ç¢ºèª"
        else
          echo "âŒ style.css ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“"
        fi
        
        if [ -f "app.js" ]; then
          echo "âœ… app.js å­˜åœ¨ç¢ºèª"
        else
          echo "âŒ app.js ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“"
        fi
    
    - name: ğŸ“Š é–‹ç™ºé€²æ—ãƒ¬ãƒãƒ¼ãƒˆ
      run: |
        echo ""
        echo "=== ğŸ“Š ãƒ•ã‚§ãƒ¼ã‚º2å®Œäº†ãƒ¬ãƒãƒ¼ãƒˆ ==="
        echo "ğŸ¯ ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚¿ã‚¤ãƒãƒ¼æ©Ÿèƒ½"
        echo "ğŸ”Š éŸ³å£°é€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ "
        echo "ğŸ¨ ãƒ•ã‚§ãƒ¼ã‚ºåˆ¥è¦–è¦šãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯"
        echo "âŒ¨ï¸ ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ"
        echo "ğŸ“± ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³"
        echo "âœ… ãƒ•ã‚§ãƒ¼ã‚º2: å®Œå…¨æ©Ÿèƒ½ç‰ˆã‚¿ã‚¤ãƒãƒ¼å®Œæˆï¼"

  deploy-pages:
    runs-on: ubuntu-latest
    name: GitHub Pagesãƒ‡ãƒ—ãƒ­ã‚¤
    needs: validate-project
    if: github.ref == 'refs/heads/main'
    environment:
      name: github-pages
      url: ${{ steps.deployment.outputs.page_url }}
    
    steps:
    - uses: actions/checkout@v4
    
    - name: ğŸš€ GitHub Pagesè¨­å®š
      uses: actions/configure-pages@v4
      
    - name: ğŸ“¤ ã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
      uses: actions/upload-pages-artifact@v3
      with:
        path: '.'
        
    - name: ğŸŒ GitHub Pagesãƒ‡ãƒ—ãƒ­ã‚¤
      id: deployment
      uses: actions/deploy-pages@v4